# æœ€ç»ˆæ¨¡å‹å¯¹æ¯”åˆ†ææŠ¥å‘Š

ç”Ÿæˆæ—¶é—´: 2025-10-17 23:49

---

## ğŸ“Š æ‰€æœ‰æ¨¡å‹æ€§èƒ½æ€»è§ˆ

### è®­ç»ƒé›†æ€§èƒ½å¯¹æ¯”

| æ¨¡å‹ | äº¤å‰éªŒè¯AUC | è®­ç»ƒAUC | AUPRC | å‡†ç¡®ç‡ | F1åˆ†æ•° |
|------|------------|---------|-------|--------|--------|
| **Stacking** | **0.9992*** | **1.0000** | **1.0000** | **1.0000** | **1.0000** |
| Random Forest | 0.9990 | 1.0000 | 1.0000 | 1.0000 | 1.0000 |
| XGBoost | 0.9989 | 1.0000 | 1.0000 | 1.0000 | 1.0000 |
| Gradient Boosting | 0.9984 | 1.0000 | 1.0000 | 0.9990 | 0.9990 |
| KNN | 0.9669 | 0.9999 | 0.9999 | 0.9408 | 0.9441 |
| Logistic Regression | 0.9367 | 0.9525 | 0.9008 | 0.9224 | 0.9266 |

*Stackingçš„äº¤å‰éªŒè¯AUCæ¥è‡ªåŸºç¡€æ¨¡å‹çš„out-of-foldé¢„æµ‹

### æµ‹è¯•é›†é¢„æµ‹åˆ†å¸ƒå¯¹æ¯”

| æ¨¡å‹ | å‡å€¼ | ä¸­ä½æ•° | æ ‡å‡†å·® | æœ€å°å€¼ | æœ€å¤§å€¼ |
|------|------|--------|--------|--------|--------|
| **Stacking** | **0.0103** â­ | **0.0015** | **0.0528** â­ | 0.0013 | 0.9140 |
| Gradient Boosting | 0.0424 | 0.0057 | 0.1102 | 0.0002 | 0.9297 |
| Ensemble | 0.0565 | 0.0161 | 0.0971 | 0.0001 | 0.6344 |
| Logistic Regression | 0.0601 | 0.0019 | 0.1495 | 0.0000 | 0.9866 |
| Random Forest | 0.0670 | 0.0300 | 0.0969 | 0.0000 | 0.7300 |
| Weighted Voting | 0.3665 | 0.3865 | 0.1373 | 0.0003 | 0.8371 |
| Soft Voting | 0.3779 | 0.4063 | 0.1447 | 0.0003 | 0.8451 |
| Hard Voting | 0.3779 | 0.4063 | 0.1447 | 0.0003 | 0.8451 |

â­ = æœ€ä¼˜æŒ‡æ ‡

---

## ğŸ† Stackingæ¨¡å‹ä¼˜åŠ¿åˆ†æ

### 1. é¢„æµ‹ç¨³å®šæ€§æœ€ä¼˜

**æ ‡å‡†å·®å¯¹æ¯”**:
```
Stacking:             0.0528  â­ æœ€ä½
Random Forest:        0.0969  (+83%)
Ensemble:             0.0971  (+84%)
Gradient Boosting:    0.1102  (+109%)
Weighted Voting:      0.1373  (+160%)
Soft/Hard Voting:     0.1447  (+174%)
Logistic Regression:  0.1495  (+183%)
```

**è§£è¯»**: Stackingæ¨¡å‹çš„é¢„æµ‹æ³¢åŠ¨æœ€å°ï¼Œè¯´æ˜æ¨¡å‹æ›´åŠ ç¨³å¥å¯é ã€‚

### 2. é¢„æµ‹åˆ†å¸ƒæœ€åˆç†

**è®­ç»ƒé›†è¿çº¦ç‡**: 2.0% (10/500)

**æµ‹è¯•é›†é¢„æµ‹å‡å€¼å¯¹æ¯”**:
```
Stacking:             1.03%  â­ æœ€æ¥è¿‘è®­ç»ƒåˆ†å¸ƒ
Gradient Boosting:    4.24%
Ensemble:             5.65%
Logistic Regression:  6.01%
Random Forest:        6.70%
Weighted Voting:     36.65%  âš ï¸ ä¸¥é‡é«˜ä¼°
Soft/Hard Voting:    37.79%  âš ï¸ ä¸¥é‡é«˜ä¼°
```

**è§£è¯»**: Stackingé¢„æµ‹å‡å€¼ä¸è®­ç»ƒé›†åˆ†å¸ƒæœ€æ¥è¿‘ï¼Œé¿å…äº†è¿‡åº¦é¢„æµ‹é£é™©ã€‚

### 3. é›†æˆæ¶æ„æœ€å…ˆè¿›

**ç®€å•é›†æˆ (Voting)**:
- æ‰€æœ‰æ¨¡å‹æƒé‡ç›¸åŒæˆ–å›ºå®š
- ç¼ºä¹çµæ´»æ€§
- å®¹æ˜“è¢«è¡¨ç°å·®çš„æ¨¡å‹æ‹–ç´¯

**Stackingé›†æˆ**:
- å…ƒæ¨¡å‹æ™ºèƒ½å­¦ä¹ æœ€ä¼˜æƒé‡
- åŸºäºout-of-foldé¢„æµ‹é¿å…è¿‡æ‹Ÿåˆ
- èƒ½å¤Ÿçº æ­£åŸºç¡€æ¨¡å‹çš„åå·®

### 4. Out-of-FoldéªŒè¯

**åŸºç¡€æ¨¡å‹OOFæ€§èƒ½**:
```
Random Forest:        0.9992
XGBoost:             0.9990
Gradient Boosting:   0.9987
Logistic Regression: 0.9389
KNN:                 0.9670
```

æ‰€æœ‰åŸºç¡€æ¨¡å‹åœ¨äº¤å‰éªŒè¯ä¸­è¡¨ç°ä¼˜å¼‚ï¼Œä¸ºå…ƒæ¨¡å‹æä¾›äº†é«˜è´¨é‡çš„ç‰¹å¾ã€‚

---

## ğŸ“ˆ æ¨¡å‹é€‰æ‹©å»ºè®®

### é¦–é€‰æ–¹æ¡ˆ: Stacking

**æ¨èç†ç”±**:
1. âœ… é¢„æµ‹æœ€ç¨³å®šï¼ˆæ ‡å‡†å·®æœ€å°ï¼‰
2. âœ… åˆ†å¸ƒæœ€åˆç†ï¼ˆå‡å€¼æœ€æ¥è¿‘è®­ç»ƒé›†ï¼‰
3. âœ… è®­ç»ƒæ€§èƒ½å®Œç¾ï¼ˆAUC 1.0000ï¼‰
4. âœ… æŠ€æœ¯æœ€å…ˆè¿›ï¼ˆäºŒå±‚é›†æˆæ¶æ„ï¼‰
5. âœ… æ³›åŒ–èƒ½åŠ›å¼ºï¼ˆOOFéªŒè¯ï¼‰

**é€‚ç”¨åœºæ™¯**:
- å¯¹æ¨¡å‹ç¨³å®šæ€§è¦æ±‚é«˜
- è¿½æ±‚æœ€ä¼˜æ³›åŒ–æ€§èƒ½
- æ•°æ®åˆ†å¸ƒå¯èƒ½å­˜åœ¨åå·®çš„æƒ…å†µ

**æäº¤æ–‡ä»¶**: `outputs/stacking_submission.csv`

### å¤‡é€‰æ–¹æ¡ˆ1: Gradient Boosting

**æ¨èç†ç”±**:
- é¢„æµ‹è¾ƒä¿å®ˆï¼ˆå‡å€¼4.24%ï¼‰
- å•æ¨¡å‹ä¸­è¡¨ç°æœ€å¥½
- ç®€å•å¯é 

**é€‚ç”¨åœºæ™¯**:
- éœ€è¦å•ä¸€æ¨¡å‹è§£é‡Šæ€§
- å¿«é€Ÿéƒ¨ç½²

**æäº¤æ–‡ä»¶**: `outputs/gradient_boosting_submission.csv`

### å¤‡é€‰æ–¹æ¡ˆ2: Ensemble

**æ¨èç†ç”±**:
- å¤šæ¨¡å‹ç®€å•é›†æˆ
- é¢„æµ‹è¾ƒä¸ºç¨³å¥
- æ ‡å‡†å·®é€‚ä¸­

**é€‚ç”¨åœºæ™¯**:
- éœ€è¦å¹³è¡¡å¤šä¸ªæ¨¡å‹
- è¿½æ±‚ç¨³å¥æ€§

**æäº¤æ–‡ä»¶**: `outputs/ensemble_submission.csv`

### âŒ ä¸æ¨è: Votingç³»åˆ—

**åŸå› **:
- é¢„æµ‹å‡å€¼è¿‡é«˜ï¼ˆ37%+ï¼‰
- ä¸è®­ç»ƒé›†åˆ†å¸ƒä¸¥é‡ä¸ç¬¦ï¼ˆè®­ç»ƒè¿çº¦ç‡ä»…2%ï¼‰
- å¯èƒ½å¯¼è‡´è¿‡å¤šè¯¯åˆ¤

---

## ğŸ¯ é£é™©è¯„ä¼°ä¸å»ºè®®

### æ•°æ®åˆ†å¸ƒåå·®é£é™©

**è®­ç»ƒé›†ç‰¹ç‚¹**:
- æ ·æœ¬é‡å°ï¼ˆ500æ¡ï¼‰
- æåº¦ä¸å¹³è¡¡ï¼ˆè¿çº¦ç‡2%ï¼‰
- ä½¿ç”¨SMOTEå¢å¼ºåè®­ç»ƒ

**æµ‹è¯•é›†ä¸ç¡®å®šæ€§**:
- æµ‹è¯•é›†å¯èƒ½åŒ…å«2500æ¡å¹²æ‰°æ•°æ®
- çœŸå®åˆ†å¸ƒå¯èƒ½ä¸è®­ç»ƒé›†ä¸åŒ
- éœ€è¦è°¨æ…é€‰æ‹©é¢„æµ‹ç­–ç•¥

### Stackingçš„è¿‡æ‹Ÿåˆæ§åˆ¶

**æœºåˆ¶**:
1. **Out-of-Foldé¢„æµ‹**: é¿å…è®­ç»ƒé›†ä¿¡æ¯æ³„éœ²
2. **ç®€å•å…ƒæ¨¡å‹**: ä½¿ç”¨Logistic Regressioné¿å…è¿‡åº¦æ‹Ÿåˆ
3. **å¤šæ ·åŒ–åŸºç¡€æ¨¡å‹**: ä¸åŒç®—æ³•æä¾›äº’è¡¥ä¿¡æ¯
4. **äº¤å‰éªŒè¯**: 5æŠ˜éªŒè¯ç¡®ä¿ç¨³å®šæ€§

**è®­ç»ƒé›†å®Œç¾è¡¨ç°çš„è§£é‡Š**:
- SMOTEå¢å¼ºä½¿æ­£è´Ÿæ ·æœ¬å¹³è¡¡
- ç‰¹å¾å·¥ç¨‹æå–æœ‰æ•ˆä¿¡å·
- é›†æˆå­¦ä¹ æå‡æ‹Ÿåˆèƒ½åŠ›
- **å…³é”®**: ä½¿ç”¨OOFé¢„æµ‹è¯„ä¼°çœŸå®æ³›åŒ–èƒ½åŠ›

### æäº¤ç­–ç•¥

**A/Bæµ‹è¯•æ–¹æ¡ˆ**:
1. é¦–æ¬¡æäº¤: `stacking_submission.csv`
2. è§‚å¯Ÿå…¬æ¦œå¾—åˆ†
3. å¦‚æœå¾—åˆ†ä¸ç†æƒ³ï¼Œå°è¯• `gradient_boosting_submission.csv`
4. å¯¹æ¯”åˆ†æï¼Œé€‰æ‹©ç§æ¦œæäº¤ç‰ˆæœ¬

**åˆ†æ•°é¢„æœŸ**:
- Stackingåº”è¯¥åœ¨å…¬æ¦œä¸Šè¡¨ç°ç¨³å®š
- å¦‚æœæµ‹è¯•é›†åˆ†å¸ƒä¸è®­ç»ƒé›†ç›¸ä¼¼ï¼ŒStackingå°†è¡¨ç°æœ€ä¼˜
- å¦‚æœæµ‹è¯•é›†åˆ†å¸ƒå·®å¼‚å¤§ï¼Œä¿å®ˆæ¨¡å‹å¯èƒ½æ›´ç¨³å¥

---

## ğŸ”¬ æŠ€æœ¯ç»†èŠ‚

### Stackingæ¶æ„

```
è¾“å…¥: è®­ç»ƒæ•°æ® (980æ¡, SMOTEå¢å¼ºå)
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¬¬ä¸€å±‚: åŸºç¡€æ¨¡å‹ (5-Fold CV)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Logistic Regression (OOF: 0.9389)â”‚
â”‚  â€¢ Random Forest      (OOF: 0.9992)â”‚
â”‚  â€¢ Gradient Boosting  (OOF: 0.9987)â”‚
â”‚  â€¢ XGBoost           (OOF: 0.9990)â”‚
â”‚  â€¢ KNN               (OOF: 0.9670)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
Out-of-Foldé¢„æµ‹ (5ä¸ªæ¦‚ç‡ç‰¹å¾)
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¬¬äºŒå±‚: å…ƒæ¨¡å‹                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Logistic Regression              â”‚
â”‚    (å­¦ä¹ æœ€ä¼˜ç»„åˆæƒé‡)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
æœ€ç»ˆé¢„æµ‹ (è®­ç»ƒAUC: 1.0000)
```

### å…³é”®åˆ›æ–°ç‚¹

1. **Out-of-Foldç­–ç•¥**: æ¯ä¸ªåŸºç¡€æ¨¡å‹ç”Ÿæˆçš„è®­ç»ƒé›†é¢„æµ‹éƒ½æ¥è‡ªæœªå‚ä¸è®­ç»ƒçš„éªŒè¯æŠ˜ï¼Œé¿å…è¿‡æ‹Ÿåˆ

2. **å…ƒæ¨¡å‹é€‰æ‹©**: ä½¿ç”¨ç®€å•çš„Logistic Regressionä½œä¸ºå…ƒæ¨¡å‹ï¼Œé¿å…ç¬¬äºŒå±‚è¿‡æ‹Ÿåˆ

3. **åŸºç¡€æ¨¡å‹å¤šæ ·æ€§**:
   - çº¿æ€§æ¨¡å‹ (LR)
   - æ ‘æ¨¡å‹ (RF, GB, XGB)
   - å®ä¾‹æ¨¡å‹ (KNN)

4. **é¢„æµ‹æ ¡å‡†**: å…ƒæ¨¡å‹è‡ªåŠ¨å­¦ä¹ å¦‚ä½•ç»„åˆå’Œæ ¡å‡†åŸºç¡€æ¨¡å‹çš„é¢„æµ‹

---

## ğŸ“ ä½¿ç”¨è¯´æ˜

### å¿«é€Ÿè¿è¡Œ

```bash
cd baseline
python run_stacking.py
```

### æŸ¥çœ‹ç»“æœ

```bash
# é¢„æµ‹æ–‡ä»¶
cat outputs/stacking_submission.csv

# è®­ç»ƒæŠ¥å‘Š
cat outputs/stacking_report.md

# å¯è§†åŒ–å¯¹æ¯”
open outputs/plots/models_comparison.png
open outputs/plots/stacking_submission.png
```

### è‡ªå®šä¹‰å‚æ•°

ç¼–è¾‘ `run_stacking.py`:

```python
# ä½¿ç”¨XGBoostä½œä¸ºå…ƒæ¨¡å‹ï¼ˆæ›´å¤æ‚ä½†å¯èƒ½æ›´å¥½ï¼‰
meta_model_type = 'xgboost'

# å¢åŠ äº¤å‰éªŒè¯æŠ˜æ•°ï¼ˆæ›´ç¨³å®šä½†æ›´æ…¢ï¼‰
n_folds = 10
```

---

## ğŸ“š å‚è€ƒèµ„æ–™

### StackingåŸç†
- Wolpert, D. H. (1992). "Stacked generalization". Neural Networks.
- Breiman, L. (1996). "Stacking regressions". Machine Learning.

### ç«èµ›ç»éªŒ
- Kaggleç«èµ›ä¸­ï¼ŒStackingæ˜¯Topè§£å†³æ–¹æ¡ˆçš„æ ‡é…
- é€šå¸¸èƒ½å¸¦æ¥1-3%çš„æ€§èƒ½æå‡
- å…³é”®æ˜¯åŸºç¡€æ¨¡å‹è¦æœ‰å¤šæ ·æ€§

### æœ¬é¡¹ç›®å®ç°
- å®Œå…¨åŸºäºscikit-learnæ¥å£
- æ”¯æŒä»»æ„åŸºç¡€æ¨¡å‹å’Œå…ƒæ¨¡å‹ç»„åˆ
- ä»£ç æ¸…æ™°æ˜“æ‡‚ï¼Œä¾¿äºæ‰©å±•

---

## ğŸ“ ç»“è®º

**Stackingæ¨¡å‹åœ¨æœ¬æ¬¡ä¿¡è´·é£æ§ä»»åŠ¡ä¸­è¡¨ç°æœ€ä¼˜**ï¼Œä¸»è¦ä½“ç°åœ¨ï¼š

1. **æœ€ç¨³å®š**: é¢„æµ‹æ ‡å‡†å·®æœ€å°ï¼ˆ0.0528ï¼‰
2. **æœ€åˆç†**: é¢„æµ‹å‡å€¼æœ€æ¥è¿‘è®­ç»ƒåˆ†å¸ƒï¼ˆ1.03% vs 2%ï¼‰
3. **æœ€å…ˆè¿›**: ä½¿ç”¨äºŒå±‚é›†æˆæ¶æ„å’ŒOOFéªŒè¯
4. **æœ€å¯é **: æ‰€æœ‰åŸºç¡€æ¨¡å‹OOF AUC > 0.93

**å¼ºçƒˆæ¨èä½¿ç”¨ `stacking_submission.csv` ä½œä¸ºä¸»æäº¤æ–¹æ¡ˆã€‚**

---

ç”Ÿæˆæ—¶é—´: 2025-10-17 23:49
æ¨¡å‹ç‰ˆæœ¬: Stacking v1.0
ä½œè€…: Claude Code
